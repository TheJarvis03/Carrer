{"ast":null,"code":"import axios from 'axios';\nconst API_URL = 'http://localhost:5000/api/majors'; // Keep this URL\n\nexport const majorService = {\n  getAll: async () => {\n    try {\n      const res = await axios.get(API_URL);\n      const {\n        success,\n        data\n      } = res.data;\n      if (success && Array.isArray(data)) {\n        return {\n          success: true,\n          data: data.map(major => ({\n            code: major.code || major.major_code,\n            major_name: major.name || major.major_name,\n            group_id: major.group_id,\n            group_name: major.group_name,\n            exam_groups: major.exam_groups || []\n          }))\n        };\n      }\n      return {\n        success: false,\n        error: 'Invalid data format'\n      };\n    } catch (error) {\n      var _error$response;\n      if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 404) {\n        return {\n          success: false,\n          error: 'API endpoint not found'\n        };\n      }\n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  },\n  getMajorGroups: async () => {\n    try {\n      const res = await axios.get(`${API_URL}/groups`);\n      const {\n        success,\n        data\n      } = res.data;\n      if (success && Array.isArray(data)) {\n        return {\n          success: true,\n          data\n        };\n      }\n      return {\n        success: false,\n        error: 'Invalid group data format'\n      };\n    } catch (error) {\n      var _error$response2;\n      console.error('Error fetching major groups:', error);\n      return {\n        success: false,\n        error: ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status) === 404 ? 'Major groups endpoint not available' : error.message\n      };\n    }\n  },\n  searchMajors: async query => {\n    try {\n      var _response$data;\n      if (!(query !== null && query !== void 0 && query.trim())) {\n        return await majorService.getAll();\n      }\n      const response = await axios.get(`${API_URL}`, {\n        params: {\n          q: query.trim() // Use 'q' instead of 'search'\n        }\n      });\n      if (response !== null && response !== void 0 && (_response$data = response.data) !== null && _response$data !== void 0 && _response$data.data) {\n        const majors = response.data.data;\n        return {\n          success: true,\n          data: majors.map(major => ({\n            code: major.code || major.major_code,\n            major_name: major.name || major.major_name,\n            group_id: major.group_id,\n            group_name: major.group_name,\n            exam_groups: major.exam_groups || []\n          }))\n        };\n      }\n      return {\n        success: false,\n        error: 'Không tìm thấy kết quả phù hợp'\n      };\n    } catch (error) {\n      var _error$response3;\n      console.error('Search error:', (error === null || error === void 0 ? void 0 : (_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.data) || error);\n      return {\n        success: false,\n        error: 'Không thể tìm kiếm, vui lòng thử lại'\n      };\n    }\n  }\n};","map":{"version":3,"names":["axios","API_URL","majorService","getAll","res","get","success","data","Array","isArray","map","major","code","major_code","major_name","name","group_id","group_name","exam_groups","error","_error$response","response","status","message","getMajorGroups","_error$response2","console","searchMajors","query","_response$data","trim","params","q","majors","_error$response3"],"sources":["F:/career-project/frontend/src/services/majorService.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_URL = 'http://localhost:5000/api/majors';  // Keep this URL\n\nexport const majorService = {\n    getAll: async () => {\n        try {\n            const res = await axios.get(API_URL);\n            const { success, data } = res.data;\n\n            if (success && Array.isArray(data)) {\n                return {\n                    success: true,\n                    data: data.map((major) => ({\n                        code: major.code || major.major_code,\n                        major_name: major.name || major.major_name,\n                        group_id: major.group_id,\n                        group_name: major.group_name,\n                        exam_groups: major.exam_groups || [],\n                    })),\n                };\n            }\n            return { success: false, error: 'Invalid data format' };\n        } catch (error) {\n            if (error.response?.status === 404) {\n                return { success: false, error: 'API endpoint not found' };\n            }\n            return { success: false, error: error.message };\n        }\n    },\n\n    getMajorGroups: async () => {\n        try {\n            const res = await axios.get(`${API_URL}/groups`);\n            const { success, data } = res.data;\n            \n            if (success && Array.isArray(data)) {\n                return { success: true, data };\n            }\n            return { success: false, error: 'Invalid group data format' };\n        } catch (error) {\n            console.error('Error fetching major groups:', error);\n            return { \n                success: false, \n                error: error.response?.status === 404 \n                    ? 'Major groups endpoint not available' \n                    : error.message \n            };\n        }\n    },\n\n    searchMajors: async (query) => {\n        try {\n            if (!query?.trim()) {\n                return await majorService.getAll();\n            }\n\n            const response = await axios.get(`${API_URL}`, {\n                params: {\n                    q: query.trim()  // Use 'q' instead of 'search'\n                }\n            });\n            \n            if (response?.data?.data) {\n                const majors = response.data.data;\n                return {\n                    success: true,\n                    data: majors.map((major) => ({\n                        code: major.code || major.major_code,\n                        major_name: major.name || major.major_name,\n                        group_id: major.group_id,\n                        group_name: major.group_name,\n                        exam_groups: major.exam_groups || [],\n                    }))\n                };\n            }\n            return { \n                success: false, \n                error: 'Không tìm thấy kết quả phù hợp' \n            };\n        } catch (error) {\n            console.error('Search error:', error?.response?.data || error);\n            return { \n                success: false, \n                error: 'Không thể tìm kiếm, vui lòng thử lại' \n            };\n        }\n    },\n};\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,OAAO,GAAG,kCAAkC,CAAC,CAAE;;AAErD,OAAO,MAAMC,YAAY,GAAG;EACxBC,MAAM,EAAE,MAAAA,CAAA,KAAY;IAChB,IAAI;MACA,MAAMC,GAAG,GAAG,MAAMJ,KAAK,CAACK,GAAG,CAACJ,OAAO,CAAC;MACpC,MAAM;QAAEK,OAAO;QAAEC;MAAK,CAAC,GAAGH,GAAG,CAACG,IAAI;MAElC,IAAID,OAAO,IAAIE,KAAK,CAACC,OAAO,CAACF,IAAI,CAAC,EAAE;QAChC,OAAO;UACHD,OAAO,EAAE,IAAI;UACbC,IAAI,EAAEA,IAAI,CAACG,GAAG,CAAEC,KAAK,KAAM;YACvBC,IAAI,EAAED,KAAK,CAACC,IAAI,IAAID,KAAK,CAACE,UAAU;YACpCC,UAAU,EAAEH,KAAK,CAACI,IAAI,IAAIJ,KAAK,CAACG,UAAU;YAC1CE,QAAQ,EAAEL,KAAK,CAACK,QAAQ;YACxBC,UAAU,EAAEN,KAAK,CAACM,UAAU;YAC5BC,WAAW,EAAEP,KAAK,CAACO,WAAW,IAAI;UACtC,CAAC,CAAC;QACN,CAAC;MACL;MACA,OAAO;QAAEZ,OAAO,EAAE,KAAK;QAAEa,KAAK,EAAE;MAAsB,CAAC;IAC3D,CAAC,CAAC,OAAOA,KAAK,EAAE;MAAA,IAAAC,eAAA;MACZ,IAAI,EAAAA,eAAA,GAAAD,KAAK,CAACE,QAAQ,cAAAD,eAAA,uBAAdA,eAAA,CAAgBE,MAAM,MAAK,GAAG,EAAE;QAChC,OAAO;UAAEhB,OAAO,EAAE,KAAK;UAAEa,KAAK,EAAE;QAAyB,CAAC;MAC9D;MACA,OAAO;QAAEb,OAAO,EAAE,KAAK;QAAEa,KAAK,EAAEA,KAAK,CAACI;MAAQ,CAAC;IACnD;EACJ,CAAC;EAEDC,cAAc,EAAE,MAAAA,CAAA,KAAY;IACxB,IAAI;MACA,MAAMpB,GAAG,GAAG,MAAMJ,KAAK,CAACK,GAAG,CAAC,GAAGJ,OAAO,SAAS,CAAC;MAChD,MAAM;QAAEK,OAAO;QAAEC;MAAK,CAAC,GAAGH,GAAG,CAACG,IAAI;MAElC,IAAID,OAAO,IAAIE,KAAK,CAACC,OAAO,CAACF,IAAI,CAAC,EAAE;QAChC,OAAO;UAAED,OAAO,EAAE,IAAI;UAAEC;QAAK,CAAC;MAClC;MACA,OAAO;QAAED,OAAO,EAAE,KAAK;QAAEa,KAAK,EAAE;MAA4B,CAAC;IACjE,CAAC,CAAC,OAAOA,KAAK,EAAE;MAAA,IAAAM,gBAAA;MACZC,OAAO,CAACP,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;MACpD,OAAO;QACHb,OAAO,EAAE,KAAK;QACda,KAAK,EAAE,EAAAM,gBAAA,GAAAN,KAAK,CAACE,QAAQ,cAAAI,gBAAA,uBAAdA,gBAAA,CAAgBH,MAAM,MAAK,GAAG,GAC/B,qCAAqC,GACrCH,KAAK,CAACI;MAChB,CAAC;IACL;EACJ,CAAC;EAEDI,YAAY,EAAE,MAAOC,KAAK,IAAK;IAC3B,IAAI;MAAA,IAAAC,cAAA;MACA,IAAI,EAACD,KAAK,aAALA,KAAK,eAALA,KAAK,CAAEE,IAAI,CAAC,CAAC,GAAE;QAChB,OAAO,MAAM5B,YAAY,CAACC,MAAM,CAAC,CAAC;MACtC;MAEA,MAAMkB,QAAQ,GAAG,MAAMrB,KAAK,CAACK,GAAG,CAAC,GAAGJ,OAAO,EAAE,EAAE;QAC3C8B,MAAM,EAAE;UACJC,CAAC,EAAEJ,KAAK,CAACE,IAAI,CAAC,CAAC,CAAE;QACrB;MACJ,CAAC,CAAC;MAEF,IAAIT,QAAQ,aAARA,QAAQ,gBAAAQ,cAAA,GAARR,QAAQ,CAAEd,IAAI,cAAAsB,cAAA,eAAdA,cAAA,CAAgBtB,IAAI,EAAE;QACtB,MAAM0B,MAAM,GAAGZ,QAAQ,CAACd,IAAI,CAACA,IAAI;QACjC,OAAO;UACHD,OAAO,EAAE,IAAI;UACbC,IAAI,EAAE0B,MAAM,CAACvB,GAAG,CAAEC,KAAK,KAAM;YACzBC,IAAI,EAAED,KAAK,CAACC,IAAI,IAAID,KAAK,CAACE,UAAU;YACpCC,UAAU,EAAEH,KAAK,CAACI,IAAI,IAAIJ,KAAK,CAACG,UAAU;YAC1CE,QAAQ,EAAEL,KAAK,CAACK,QAAQ;YACxBC,UAAU,EAAEN,KAAK,CAACM,UAAU;YAC5BC,WAAW,EAAEP,KAAK,CAACO,WAAW,IAAI;UACtC,CAAC,CAAC;QACN,CAAC;MACL;MACA,OAAO;QACHZ,OAAO,EAAE,KAAK;QACda,KAAK,EAAE;MACX,CAAC;IACL,CAAC,CAAC,OAAOA,KAAK,EAAE;MAAA,IAAAe,gBAAA;MACZR,OAAO,CAACP,KAAK,CAAC,eAAe,EAAE,CAAAA,KAAK,aAALA,KAAK,wBAAAe,gBAAA,GAALf,KAAK,CAAEE,QAAQ,cAAAa,gBAAA,uBAAfA,gBAAA,CAAiB3B,IAAI,KAAIY,KAAK,CAAC;MAC9D,OAAO;QACHb,OAAO,EAAE,KAAK;QACda,KAAK,EAAE;MACX,CAAC;IACL;EACJ;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module"}